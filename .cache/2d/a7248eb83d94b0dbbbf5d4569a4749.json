{"id":"9ypf","dependencies":[{"name":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/package.json","includedInParent":true,"mtime":1554368853000},{"name":"web-audio-player","loc":{"line":1,"column":24},"parent":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/utils/audioplayer.js","resolved":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/node_modules/web-audio-player/index.js"},{"name":"ios-safe-audio-context","loc":{"line":2,"column":31},"parent":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/utils/audioplayer.js","resolved":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/node_modules/ios-safe-audio-context/index.js"},{"name":"detect-media-element-source","loc":{"line":3,"column":30},"parent":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/utils/audioplayer.js","resolved":"/Volumes/Data/DOCUMENTS/_htdocs/mevishaslam.com/2019-no-framework/node_modules/detect-media-element-source/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=t(require(\"web-audio-player\")),o=t(require(\"ios-safe-audio-context\")),n=t(require(\"detect-media-element-source\"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){var e=(0,o.default)();(0,n.default)(function(o){var n=!o;console.log(n),u(e,n)},e)}function u(o,n){var t=document.querySelector(\".modal\"),r=(0,e.default)([\"audio/voice.mp3\"],{context:o,buffer:!0,loop:!1});r.once(\"decoding\",function(e){console.log(\"amount: \".concat(e)),t.innerText=\"...decoding: \".concat(e)}),r.on(\"end\",function(){return console.log(\"Audio ended\")}),r.on(\"error\",function(e){return console.log(\"Error:\".concat(e.message))}),r.on(\"progress\",function(e,o){console.log(e,o)}),r.on(\"load\",function(){t.style.display=\"none\",console.log(\"Source:\",r.element?\"MediaElement\":\"Buffer\"),console.log(\"Playing\",Math.round(r.duration)+\"s of audio...\"),r.play()})}var c=r;exports.default=c;"},"sourceMaps":{"js":{"mappings":[{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":0}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":13}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":20}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":35}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":43}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":56}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":57}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":64}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":68}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":76}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":89}},{"source":"utils/audioplayer.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"utils/audioplayer.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"utils/audioplayer.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"utils/audioplayer.js","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"utils/audioplayer.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"utils/audioplayer.js","original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"utils/audioplayer.js","original":{"line":2,"column":0},"generated":{"line":1,"column":130}},{"source":"utils/audioplayer.js","original":{"line":2,"column":0},"generated":{"line":1,"column":132}},{"source":"utils/audioplayer.js","original":{"line":2,"column":0},"generated":{"line":1,"column":140}},{"source":"utils/audioplayer.js","original":{"line":3,"column":0},"generated":{"line":1,"column":167}},{"source":"utils/audioplayer.js","original":{"line":3,"column":0},"generated":{"line":1,"column":169}},{"source":"utils/audioplayer.js","original":{"line":3,"column":0},"generated":{"line":1,"column":171}},{"source":"utils/audioplayer.js","original":{"line":3,"column":0},"generated":{"line":1,"column":179}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":211}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":220}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":222}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":225}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":232}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":235}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":237}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":248}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":250}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":251}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":259}},{"source":"utils/audioplayer.js","original":{"line":6,"column":0},"generated":{"line":1,"column":262}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":6,"column":9},"generated":{"line":1,"column":271}},{"source":"utils/audioplayer.js","name":"audioContext","original":{"line":10,"column":8},"generated":{"line":1,"column":275}},{"source":"utils/audioplayer.js","name":"audioContext","original":{"line":10,"column":8},"generated":{"line":1,"column":279}},{"source":"utils/audioplayer.js","original":{"line":10,"column":23},"generated":{"line":1,"column":282}},{"source":"utils/audioplayer.js","original":{"line":10,"column":2},"generated":{"line":1,"column":284}},{"source":"utils/audioplayer.js","original":{"line":10,"column":2},"generated":{"line":1,"column":286}},{"source":"utils/audioplayer.js","original":{"line":14,"column":20},"generated":{"line":1,"column":298}},{"source":"utils/audioplayer.js","original":{"line":14,"column":20},"generated":{"line":1,"column":300}},{"source":"utils/audioplayer.js","original":{"line":14,"column":20},"generated":{"line":1,"column":302}},{"source":"utils/audioplayer.js","original":{"line":14,"column":20},"generated":{"line":1,"column":311}},{"source":"utils/audioplayer.js","name":"supportsMediaElement","original":{"line":14,"column":29},"generated":{"line":1,"column":320}},{"source":"utils/audioplayer.js","name":"shouldBuffer","original":{"line":16,"column":10},"generated":{"line":1,"column":323}},{"source":"utils/audioplayer.js","name":"shouldBuffer","original":{"line":16,"column":10},"generated":{"line":1,"column":327}},{"source":"utils/audioplayer.js","name":"supportsMediaElement","original":{"line":16,"column":26},"generated":{"line":1,"column":330}},{"source":"utils/audioplayer.js","name":"console","original":{"line":17,"column":4},"generated":{"line":1,"column":332}},{"source":"utils/audioplayer.js","name":"log","original":{"line":17,"column":12},"generated":{"line":1,"column":340}},{"source":"utils/audioplayer.js","name":"shouldBuffer","original":{"line":17,"column":16},"generated":{"line":1,"column":344}},{"source":"utils/audioplayer.js","name":"startPlayer","original":{"line":18,"column":4},"generated":{"line":1,"column":347}},{"source":"utils/audioplayer.js","name":"audioContext","original":{"line":18,"column":16},"generated":{"line":1,"column":349}},{"source":"utils/audioplayer.js","name":"shouldBuffer","original":{"line":18,"column":30},"generated":{"line":1,"column":351}},{"source":"utils/audioplayer.js","name":"audioContext","original":{"line":19,"column":5},"generated":{"line":1,"column":355}},{"source":"utils/audioplayer.js","original":{"line":22,"column":0},"generated":{"line":1,"column":358}},{"source":"utils/audioplayer.js","name":"startPlayer","original":{"line":22,"column":9},"generated":{"line":1,"column":367}},{"source":"utils/audioplayer.js","name":"audioContext","original":{"line":22,"column":21},"generated":{"line":1,"column":369}},{"source":"utils/audioplayer.js","name":"shouldBuffer","original":{"line":22,"column":35},"generated":{"line":1,"column":371}},{"source":"utils/audioplayer.js","name":"sources","original":{"line":24,"column":8},"generated":{"line":1,"column":374}},{"source":"utils/audioplayer.js","name":"modal","original":{"line":25,"column":8},"generated":{"line":1,"column":378}},{"source":"utils/audioplayer.js","name":"document","original":{"line":25,"column":16},"generated":{"line":1,"column":380}},{"source":"utils/audioplayer.js","name":"querySelector","original":{"line":25,"column":25},"generated":{"line":1,"column":389}},{"source":"utils/audioplayer.js","original":{"line":25,"column":39},"generated":{"line":1,"column":403}},{"source":"utils/audioplayer.js","name":"player","original":{"line":27,"column":8},"generated":{"line":1,"column":413}},{"source":"utils/audioplayer.js","original":{"line":27,"column":17},"generated":{"line":1,"column":416}},{"source":"utils/audioplayer.js","name":"sources","original":{"line":27,"column":29},"generated":{"line":1,"column":418}},{"source":"utils/audioplayer.js","name":"sources","original":{"line":27,"column":29},"generated":{"line":1,"column":420}},{"source":"utils/audioplayer.js","original":{"line":24,"column":18},"generated":{"line":1,"column":429}},{"source":"utils/audioplayer.js","original":{"line":24,"column":19},"generated":{"line":1,"column":430}},{"source":"utils/audioplayer.js","original":{"line":27,"column":38},"generated":{"line":1,"column":449}},{"source":"utils/audioplayer.js","name":"context","original":{"line":28,"column":4},"generated":{"line":1,"column":450}},{"source":"utils/audioplayer.js","name":"audioContext","original":{"line":28,"column":13},"generated":{"line":1,"column":458}},{"source":"utils/audioplayer.js","name":"buffer","original":{"line":29,"column":4},"generated":{"line":1,"column":460}},{"source":"utils/audioplayer.js","original":{"line":29,"column":12},"generated":{"line":1,"column":468}},{"source":"utils/audioplayer.js","name":"loop","original":{"line":30,"column":4},"generated":{"line":1,"column":470}},{"source":"utils/audioplayer.js","original":{"line":30,"column":10},"generated":{"line":1,"column":476}},{"source":"utils/audioplayer.js","name":"player","original":{"line":34,"column":2},"generated":{"line":1,"column":480}},{"source":"utils/audioplayer.js","name":"once","original":{"line":34,"column":9},"generated":{"line":1,"column":482}},{"source":"utils/audioplayer.js","original":{"line":34,"column":14},"generated":{"line":1,"column":487}},{"source":"utils/audioplayer.js","original":{"line":34,"column":26},"generated":{"line":1,"column":498}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":34,"column":27},"generated":{"line":1,"column":507}},{"source":"utils/audioplayer.js","name":"console","original":{"line":35,"column":4},"generated":{"line":1,"column":510}},{"source":"utils/audioplayer.js","name":"log","original":{"line":35,"column":12},"generated":{"line":1,"column":518}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":35,"column":27},"generated":{"line":1,"column":522}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":35,"column":27},"generated":{"line":1,"column":533}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":35,"column":27},"generated":{"line":1,"column":540}},{"source":"utils/audioplayer.js","name":"modal","original":{"line":36,"column":4},"generated":{"line":1,"column":544}},{"source":"utils/audioplayer.js","name":"innerText","original":{"line":36,"column":10},"generated":{"line":1,"column":546}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":36,"column":38},"generated":{"line":1,"column":556}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":36,"column":38},"generated":{"line":1,"column":572}},{"source":"utils/audioplayer.js","name":"amount","original":{"line":36,"column":38},"generated":{"line":1,"column":579}},{"source":"utils/audioplayer.js","name":"player","original":{"line":40,"column":2},"generated":{"line":1,"column":584}},{"source":"utils/audioplayer.js","name":"on","original":{"line":40,"column":9},"generated":{"line":1,"column":586}},{"source":"utils/audioplayer.js","original":{"line":40,"column":12},"generated":{"line":1,"column":589}},{"source":"utils/audioplayer.js","original":{"line":40,"column":19},"generated":{"line":1,"column":595}},{"source":"utils/audioplayer.js","name":"console","original":{"line":40,"column":25},"generated":{"line":1,"column":606}},{"source":"utils/audioplayer.js","name":"console","original":{"line":40,"column":25},"generated":{"line":1,"column":613}},{"source":"utils/audioplayer.js","name":"log","original":{"line":40,"column":33},"generated":{"line":1,"column":621}},{"source":"utils/audioplayer.js","original":{"line":40,"column":37},"generated":{"line":1,"column":625}},{"source":"utils/audioplayer.js","name":"player","original":{"line":42,"column":2},"generated":{"line":1,"column":642}},{"source":"utils/audioplayer.js","name":"on","original":{"line":42,"column":9},"generated":{"line":1,"column":644}},{"source":"utils/audioplayer.js","original":{"line":42,"column":12},"generated":{"line":1,"column":647}},{"source":"utils/audioplayer.js","original":{"line":42,"column":21},"generated":{"line":1,"column":655}},{"source":"utils/audioplayer.js","name":"err","original":{"line":42,"column":22},"generated":{"line":1,"column":664}},{"source":"utils/audioplayer.js","name":"console","original":{"line":42,"column":30},"generated":{"line":1,"column":667}},{"source":"utils/audioplayer.js","name":"console","original":{"line":42,"column":30},"generated":{"line":1,"column":674}},{"source":"utils/audioplayer.js","name":"log","original":{"line":42,"column":38},"generated":{"line":1,"column":682}},{"source":"utils/audioplayer.js","name":"err","original":{"line":42,"column":51},"generated":{"line":1,"column":686}},{"source":"utils/audioplayer.js","name":"err","original":{"line":42,"column":51},"generated":{"line":1,"column":695}},{"source":"utils/audioplayer.js","name":"err","original":{"line":42,"column":51},"generated":{"line":1,"column":702}},{"source":"utils/audioplayer.js","name":"message","original":{"line":42,"column":55},"generated":{"line":1,"column":704}},{"source":"utils/audioplayer.js","name":"player","original":{"line":44,"column":2},"generated":{"line":1,"column":716}},{"source":"utils/audioplayer.js","name":"on","original":{"line":44,"column":9},"generated":{"line":1,"column":718}},{"source":"utils/audioplayer.js","original":{"line":44,"column":12},"generated":{"line":1,"column":721}},{"source":"utils/audioplayer.js","original":{"line":44,"column":24},"generated":{"line":1,"column":732}},{"source":"utils/audioplayer.js","name":"percentage","original":{"line":44,"column":25},"generated":{"line":1,"column":741}},{"source":"utils/audioplayer.js","name":"totalBytes","original":{"line":44,"column":37},"generated":{"line":1,"column":743}},{"source":"utils/audioplayer.js","name":"console","original":{"line":46,"column":4},"generated":{"line":1,"column":746}},{"source":"utils/audioplayer.js","name":"log","original":{"line":46,"column":12},"generated":{"line":1,"column":754}},{"source":"utils/audioplayer.js","name":"percentage","original":{"line":46,"column":16},"generated":{"line":1,"column":758}},{"source":"utils/audioplayer.js","name":"totalBytes","original":{"line":46,"column":28},"generated":{"line":1,"column":760}},{"source":"utils/audioplayer.js","name":"player","original":{"line":50,"column":2},"generated":{"line":1,"column":765}},{"source":"utils/audioplayer.js","name":"on","original":{"line":50,"column":9},"generated":{"line":1,"column":767}},{"source":"utils/audioplayer.js","original":{"line":50,"column":12},"generated":{"line":1,"column":770}},{"source":"utils/audioplayer.js","original":{"line":50,"column":20},"generated":{"line":1,"column":777}},{"source":"utils/audioplayer.js","name":"modal","original":{"line":51,"column":4},"generated":{"line":1,"column":788}},{"source":"utils/audioplayer.js","name":"style","original":{"line":51,"column":10},"generated":{"line":1,"column":790}},{"source":"utils/audioplayer.js","name":"display","original":{"line":51,"column":16},"generated":{"line":1,"column":796}},{"source":"utils/audioplayer.js","original":{"line":51,"column":26},"generated":{"line":1,"column":804}},{"source":"utils/audioplayer.js","name":"console","original":{"line":53,"column":4},"generated":{"line":1,"column":811}},{"source":"utils/audioplayer.js","name":"log","original":{"line":53,"column":12},"generated":{"line":1,"column":819}},{"source":"utils/audioplayer.js","original":{"line":53,"column":16},"generated":{"line":1,"column":823}},{"source":"utils/audioplayer.js","name":"player","original":{"line":53,"column":27},"generated":{"line":1,"column":833}},{"source":"utils/audioplayer.js","name":"element","original":{"line":53,"column":34},"generated":{"line":1,"column":835}},{"source":"utils/audioplayer.js","original":{"line":53,"column":44},"generated":{"line":1,"column":843}},{"source":"utils/audioplayer.js","original":{"line":53,"column":61},"generated":{"line":1,"column":858}},{"source":"utils/audioplayer.js","name":"console","original":{"line":54,"column":4},"generated":{"line":1,"column":868}},{"source":"utils/audioplayer.js","name":"log","original":{"line":54,"column":12},"generated":{"line":1,"column":876}},{"source":"utils/audioplayer.js","original":{"line":54,"column":16},"generated":{"line":1,"column":880}},{"source":"utils/audioplayer.js","name":"Math","original":{"line":54,"column":27},"generated":{"line":1,"column":890}},{"source":"utils/audioplayer.js","name":"round","original":{"line":54,"column":32},"generated":{"line":1,"column":895}},{"source":"utils/audioplayer.js","name":"player","original":{"line":54,"column":38},"generated":{"line":1,"column":901}},{"source":"utils/audioplayer.js","name":"duration","original":{"line":54,"column":45},"generated":{"line":1,"column":903}},{"source":"utils/audioplayer.js","original":{"line":54,"column":57},"generated":{"line":1,"column":913}},{"source":"utils/audioplayer.js","name":"player","original":{"line":56,"column":4},"generated":{"line":1,"column":930}},{"source":"utils/audioplayer.js","name":"play","original":{"line":56,"column":11},"generated":{"line":1,"column":932}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":941}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":945}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":947}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":949}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":957}},{"source":"utils/audioplayer.js","name":"initPlayer","original":{"line":60,"column":15},"generated":{"line":1,"column":965}}],"sources":{"utils/audioplayer.js":"import audioPlayer from 'web-audio-player'\nimport createAudioContext from 'ios-safe-audio-context'\nimport detectMediaSource from 'detect-media-element-source'\n// create a loading event that triggers animation in cursor.js\n\nfunction initPlayer() {\n  // Create an iOS-safe AudioContext which fixes\n  // potential sampleRate bugs with playback\n  // (The hack needs to be called on touchend for iOS!)\n  const audioContext = createAudioContext()\n\n  // Detect whether createMediaElementSource() works\n  // as expected. You can also use userAgent sniffing here.\n  detectMediaSource(function(supportsMediaElement) {\n    // No media element support -> we should buffer\n    const shouldBuffer = !supportsMediaElement\n    console.log(shouldBuffer)\n    startPlayer(audioContext, shouldBuffer)\n  }, audioContext)\n}\n\nfunction startPlayer(audioContext, shouldBuffer) {\n  // add backup .ogg ?\n  const sources = ['audio/voice.mp3']\n  const modal = document.querySelector('.modal')\n\n  const player = audioPlayer(sources, {\n    context: audioContext,\n    buffer: true,\n    loop: false,\n  })\n\n  // This is triggered on mobile, when decodeAudioData begins.\n  player.once('decoding', (amount) => {\n    console.log(`amount: ${amount}`)\n    modal.innerText = `...decoding: ${amount}`\n  })\n\n  // Only gets called when loop: false (in the render loop?)\n  player.on('end', () => console.log('Audio ended'))\n\n  player.on('error', (err) => console.log(`Error:${err.message}`))\n\n  player.on('progress', (percentage, totalBytes) => {\n    //probably here\n    console.log(percentage, totalBytes)\n  })\n\n  // This is called with 'canplay' on desktop, and after decodeAudioData on mobile.\n  player.on('load', () => {\n    modal.style.display = 'none'\n\n    console.log('Source:', player.element ? 'MediaElement' : 'Buffer')\n    console.log('Playing', Math.round(player.duration) + 's of audio...')\n\n    player.play()\n  })\n}\n\nexport default initPlayer\n"},"lineCount":null}},"error":null,"hash":"bb51d14464ceb59bcf94c24cf8be4522","cacheData":{"env":{}}}